name: Build Electron App

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build:
    strategy:
      matrix:
        os: [windows-latest, ubuntu-latest] # ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Windows Ùˆ Linux

    runs-on: ${{ matrix.os }}

    steps:
      - name: ğŸ”¹ Ø¬Ù„Ø¨ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹
        uses: actions/checkout@v3

      - name: ğŸ”¹ ØªØ«Ø¨ÙŠØª Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 18

      - name: ğŸ”¹ ØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø²Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… npm
        run: npm install --legacy-peer-deps

      - name: ğŸ”¹ ØªØ«Ø¨ÙŠØª ØªØ¨Ø¹ÙŠØ§Øª Electron
        run: npm run postinstall

      - name: ğŸ”¹ Ø¨Ù†Ø§Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Electron Build)
        run: npm run dist

      - name: ğŸ”¹ Ø±ÙØ¹ Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª ÙƒÙ€ Artifact Ù…Ø¹ Ø±Ø§Ø¨Ø· ØªØ­Ù…ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±
        uses: actions/upload-artifact@v3
        with:
          name: tabshoura-build-${{ runner.os }}
          path: |
            dist/*.exe  # Ù…Ù„Ù Windows
            dist/*.AppImage  # Ù…Ù„Ù Linux
          retention-days: 5 # Ø³ÙŠØªÙ… Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ù…Ù„ÙØ§Øª Ù„Ù…Ø¯Ø© 5 Ø£ÙŠØ§Ù… ÙÙ‚Ø·
