name: Build Electron App

on:
  push:
    branches:
      - test
  pull_request:
    branches:
      - test

jobs:
  build:
    runs-on: windows-latest # Ø­ØµØ± Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Windows

    steps:
      - name: ğŸ”¹ Ø¬Ù„Ø¨ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹
        uses: actions/checkout@v3

      - name: ğŸ”¹ ØªØ«Ø¨ÙŠØª Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 18

      - name: ğŸ”¹ ØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø²Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… npm
        run: npm install --legacy-peer-deps

      - name: ğŸ”¹ ØªØ«Ø¨ÙŠØª ØªØ¨Ø¹ÙŠØ§Øª Electron
        run: npm run postinstall

      - name: ğŸ”¹ Ø¨Ù†Ø§Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Electron Build)
        run: npm run dist

      - name: ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù„Ù Ø¨Ø¹Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡
        run: dir build/

      - name: ğŸ” Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø¨Ø¹Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡
        run: Get-ChildItem -Path . -Recurse

      - name: ğŸ”¹ Ø±ÙØ¹ Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª ÙƒÙ€ Artifact Ù…Ø¹ Ø±Ø§Ø¨Ø· ØªØ­Ù…ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±
        uses: actions/upload-artifact@v4 # ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¥Ù„Ù‰ v4
        with:
          name: tabshoura-build
          path: |
            build/Tabshoura_Setup_1.0.0.exe
          retention-days: 5 # Ø³ÙŠØªÙ… Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ù…Ù„ÙØ§Øª Ù„Ù…Ø¯Ø© 5 Ø£ÙŠØ§Ù… ÙÙ‚Ø·
